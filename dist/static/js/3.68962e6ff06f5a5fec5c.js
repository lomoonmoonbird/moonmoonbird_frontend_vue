webpackJsonp([3],{RFZe:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App",amount:0,uname:"赵丽颖",inputMsg:"",socket:null,isCheckin:!1,msgList:[]}},mounted:function(){var t=this;t.socket=io("ws://localhost:8081"),t.socket.on("loginSuccess",function(e){e.username===t.uname?t.isCheckin=!0:alert("用户名不匹配，请重试")}),t.socket.on("loginFail",function(){alert("昵称重复")}),t.socket.on("amountChange",function(e){t.amount=e}),t.socket.on("receiveMessage",function(e){console.log("接收到服务端返回：",e),t.msgList.push(e),window.scrollTo(0,document.getElementById("chat_con").scrollHeight)})},filters:{formatDate:function(t){var e=t?new Date(t):new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())}},methods:{login:function(){this.uname?this.socket.emit("login",{username:this.uname}):alert("请输入昵称")},sendMessage:function(){var t=this;t.inputMsg?(t.socket.emit("sendMessage",{username:t.uname,message:t.inputMsg}),t.inputMsg=""):alert("请输入……")}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hello"},[t.isCheckin?s("div",{staticClass:"chat-wrap "},[s("h1",[t._v("多人聊天室（总人数："+t._s(t.amount)+"）")]),t._v(" "),s("div",{staticClass:"chat-con clearfix",attrs:{id:"chat_con"}},[t._l(t.msgList,function(e){return[0==e.msgType?[s("p",[t._v(t._s(e.message))]),s("br")]:[t.uname==e.username?s("div",{staticClass:"chat-item item-right clearfix"},[s("span",{staticClass:"img fr"}),s("span",{staticClass:"message fr"},[t._v(t._s(e.message))])]):s("div",{staticClass:"chat-item item-left clearfix rela"},[s("span",{staticClass:"abs uname"},[t._v(t._s(e.username)+"  ( "+t._s(t._f("formatDate")(e.msgDate))+" )")]),s("span",{staticClass:"img fl"}),s("span",{staticClass:"fl message"},[t._v(t._s(e.message))])])]]})],2),t._v(" "),s("div",{staticClass:"bottom"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputMsg,expression:"inputMsg",modifiers:{trim:!0}}],attrs:{type:"text",id:"sendtxt"},domProps:{value:t.inputMsg},on:{keyup:function(e){return"button"in e||13===e.keyCode?t.sendMessage(e):null},input:function(e){e.target.composing||(t.inputMsg=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("button",{staticClass:"sendBtn",on:{click:t.sendMessage}},[t._v("发送")])])]):s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"login-con"},[s("h3",[t._v("用户登录")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.uname,expression:"uname",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入昵称",id:"loginName"},domProps:{value:t.uname},on:{keyup:function(e){return"button"in e||13===e.keyCode?t.login(e):null},input:function(e){e.target.composing||(t.uname=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("button",{staticClass:"login-btn",on:{click:t.login}},[t._v("登录")])])])])},staticRenderFns:[]};var i=s("VU/8")(n,a,!1,function(t){s("vVZJ")},"data-v-6d874426",null);e.default=i.exports},vVZJ:function(t,e){}});
//# sourceMappingURL=3.68962e6ff06f5a5fec5c.js.map