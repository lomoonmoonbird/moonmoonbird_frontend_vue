webpackJsonp([3],{RFZe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App",amount:0,uname:"赵丽颖",inputMsg:"",socket:null,isCheckin:!1,msgList:[]}},mounted:function(){var e=this;e.socket=io("ws://localhost:8081"),e.socket.on("loginSuccess",function(t){t.username===e.uname?e.isCheckin=!0:alert("用户名不匹配，请重试")}),e.socket.on("loginFail",function(){alert("昵称重复")}),e.socket.on("amountChange",function(t){e.amount=t}),e.socket.on("receiveMessage",function(t){console.log("接收到服务端返回：",t),e.msgList.push(t),window.scrollTo(0,document.getElementById("chat_con").scrollHeight)})},filters:{formatDate:function(e){var t=e?new Date(e):new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}},methods:{login:function(){this.uname?this.socket.emit("login",{username:this.uname}):alert("请输入昵称")},sendMessage:function(){var e=this;e.inputMsg?(e.socket.emit("sendMessage",{username:e.uname,message:e.inputMsg}),e.inputMsg=""):alert("请输入……")}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},[e.isCheckin?s("div",{staticClass:"chat-wrap "},[s("h1",[e._v("多人聊天室（总人数："+e._s(e.amount)+"）")]),e._v(" "),s("div",{staticClass:"chat-con clearfix",attrs:{id:"chat_con"}},[e._l(e.msgList,function(t){return[0==t.msgType?[s("p",[e._v(e._s(t.message))]),s("br")]:[e.uname==t.username?s("div",{staticClass:"chat-item item-right clearfix"},[s("span",{staticClass:"img fr"}),s("span",{staticClass:"message fr"},[e._v(e._s(t.message))])]):s("div",{staticClass:"chat-item item-left clearfix rela"},[s("span",{staticClass:"abs uname"},[e._v(e._s(t.username)+"  ( "+e._s(e._f("formatDate")(t.msgDate))+" )")]),s("span",{staticClass:"img fl"}),s("span",{staticClass:"fl message"},[e._v(e._s(t.message))])])]]})],2),e._v(" "),s("div",{staticClass:"bottom"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.inputMsg,expression:"inputMsg",modifiers:{trim:!0}}],attrs:{type:"text",id:"sendtxt"},domProps:{value:e.inputMsg},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.sendMessage(t):null},input:function(t){t.target.composing||(e.inputMsg=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),s("button",{staticClass:"sendBtn",on:{click:e.sendMessage}},[e._v("发送")])])]):s("div",{staticClass:"login-wrap"},[s("div",{staticClass:"login-con"},[s("h3",[e._v("用户登录")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.uname,expression:"uname",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入昵称",id:"loginName"},domProps:{value:e.uname},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.login(t):null},input:function(t){t.target.composing||(e.uname=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),s("button",{staticClass:"login-btn",on:{click:e.login}},[e._v("登录")])])])])},staticRenderFns:[]};var i=s("VU/8")(n,a,!1,function(e){s("vVZJ")},"data-v-6d874426",null);t.default=i.exports},vVZJ:function(e,t){}});
//# sourceMappingURL=3.461dd8c529f936914d08.js.map