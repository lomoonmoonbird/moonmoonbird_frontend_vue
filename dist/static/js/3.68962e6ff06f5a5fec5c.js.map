{"version":3,"sources":["webpack:///src/components/ChatRoom.vue","webpack:///./src/components/ChatRoom.vue?7d58","webpack:///./src/components/ChatRoom.vue"],"names":["ChatRoom","this","data","scrollHeight","Date","getSeconds","uname","inputMsg","components_ChatRoom","render","_vm","_h","$createElement","_c","_self","staticClass","isCheckin","_v","_s","amount","attrs","id","_l","item","msgType","message","username","_f","msgDate","directives","name","rawName","value","expression","modifiers","trim","type","domProps","on","keyup","$event","keyCode","sendMessage","input","target","composing","blur","$forceUpdate","click","placeholder","login","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.68962e6ff06f5a5fec5c.js","sourcesContent":["<template>\n  <div class=\"hello\">\n        <div class=\"login-wrap\" v-if=\"!isCheckin\">\n          <div class=\"login-con\">\n            <h3>用户登录</h3>\n            <input type=\"text\" placeholder=\"请输入昵称\" id=\"loginName\" v-model.trim=\"uname\" @keyup.13=\"login\">\n            <button class=\"login-btn\" @click=\"login\">登录</button>\n          </div>\n        </div>\n        \n        <div class=\"chat-wrap \" v-else>\n          <h1>多人聊天室（总人数：{{amount}}）</h1>\n          <div class=\"chat-con clearfix\" id=\"chat_con\">\n            <template v-for=\"item in msgList\">\n              <!-- {{item | json}} -->\n              <template v-if=\"item.msgType==0\">\n                 <p >{{item.message}}</p><br/>\n              </template>\n             \n              <template v-else>\n                  <div class=\"chat-item item-right clearfix\" v-if=\"uname == item.username \"><span class=\"img fr\"></span><span class=\"message fr\">{{item.message}}</span></div>\n                  <div class=\"chat-item item-left clearfix rela\" v-else><span class=\"abs uname\">{{item.username}}  ( {{item.msgDate | formatDate}} )</span><span class=\"img fl\"></span><span class=\"fl message\">{{item.message}}</span></div>\n              </template>\n            </template>\n          </div>\n          <div class=\"bottom\">\n            <input type=\"text\" id=\"sendtxt\" v-model.trim=\"inputMsg\" @keyup.13=\"sendMessage\">\n            <button class=\"sendBtn\" @click=\"sendMessage\">发送</button>\n          </div>\n        </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'HelloWorld',\n  data () {\n    return {\n      msg: 'Welcome to Your Vue.js App',\n      amount: 0,          //聊天室总数人\n      uname: '赵丽颖',    //定义用户名\n      inputMsg: '',\n      socket: null,       //定义socket实例\n      isCheckin: false,\n      msgList:[],         //服务端返回的信息列表\n    }\n  },\n  mounted:function(){\n    var vm = this;\n    /*建立socket连接，使用websocket协议，端口号是服务器端监听端口号*/ \n    vm.socket = io('ws://localhost:8081');\n    /*登录成功*/\n    vm.socket.on('loginSuccess',function(data){\n      if(data.username === vm.uname){\n        // vm.checkin(data)\n        vm.isCheckin = true;\n      }else{\n        alert('用户名不匹配，请重试')\n      }\n    })\n    /*登录失败*/\n    vm.socket.on('loginFail',function(){\n      alert('昵称重复')\n    })\n    /*监听人数*/\n    vm.socket.on('amountChange',function(data){\n      vm.amount = data\n    })\n    \n    /*接收消息*/\n    vm.socket.on('receiveMessage',function(data){\n      console.log('接收到服务端返回：',data)\n      vm.msgList.push(data);\n      window.scrollTo(0, document.getElementById('chat_con').scrollHeight);\n      \n      //console.log('----',document.getElementById('chat_con').scrollHeight)\n      \n    })\n    /*新人加入提示*/\n    // vm.socket.on('add',function(data){\n    //   console.log(data)\n  \n    // })\n    /*退出群聊提示*/\n    // vm.socket.on('leave',function(name){\n    //   console.log('退出===',name)\n    //   if(name != null){\n   \n    //   }\n    // })\n  },\n  filters:{\n    formatDate:function(data){\n      var date = data ? new Date(data) : new Date();\n      var time = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate() + ' ' + date.getHours() + ':' + (date.getMinutes() < 10 ? ('0' + date.getMinutes()) : date.getMinutes()) + \":\" + (date.getSeconds() < 10 ? ('0' + date.getSeconds()) : date.getSeconds());\n      return time;\n    }\n  },\n  methods:{\n    /*登录*/\n    login:function(){\n      var vm = this;\n      if(vm.uname){\n        /*向服务端发送登录事件*/\n        vm.socket.emit('login',{username:vm.uname})\n      }else{\n        alert('请输入昵称')\n      }\n    },\n   \n    /*发送消息*/\n    sendMessage:function(){\n      var vm = this;\n     \n      if(vm.inputMsg){\n        vm.socket.emit('sendMessage',{username:vm.uname,message:vm.inputMsg});\n        vm.inputMsg = '';\n      }else{\n        alert('请输入……')\n      }\n    },\n   \n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n*{padding:0; margin:0;}\nhtml,body{width:100%;height: 100%;}\n.clearfix:after{content:\".\";display:block;height:0;clear:both;visibility:hidden}\n.clearfix{*zoom:1}\n.cred{color:#f03e3e;}\n.cgreen{color:#459d36;}\n.hide{display:none;}\n.fr{float:right;}\n.fl{float: left;}\n.rela{position: relative;}\n.abs{position:absolute;}\nh1{position: fixed; z-index:20; width: 100%; height:50px; line-height:50px; font-size:20px; left: 0; top: 0; background: #000; color: #fff;}\n.chat-wrap{width: 100%; height: 100%;overflow-y:auto; background:#e7e7e7; text-align:center;}\n.chat-con{padding: 50px 0 70px; background:#e7e7e7;}\n.chat-con p{display:inline-block; padding:5px 10px; background:#999;border-radius:5px; color:#fff; margin:5px 0;}\n.bottom{position:fixed;bottom:0; left: 0; width:100%; height: 50px; background: #fff;}\n.bottom input{width: 78%; height: 50px; line-height: 50px; float:left;border:none;}\n.bottom button{width: 20%;height: 50px; float: right; border:none; background:#459d36;color: #fff;}\n.chat-item{width:100%; margin-top:20px;}\n.item-right .message{background: #62b900;position: relative;}\n.item-left .message{background: #fff; margin-top:20px; position: relative;}\n.item-left .img{margin-right:10px;}\n.item-left .uname{font-size:12px; left:50px; top:0;}\n.chat-item .message{max-width:60%;display:block; padding:10px;border-radius:5px; margin-right:10px; text-align: justify;}\n/* .chat-item .img{display:inline-block; width:40px; height:40px; background:url(../img/user.jpg) no-repeat; background-size:100% 100%;} */\n.item-right .message::after {\n\tcontent: \"\";\n    position: absolute;\n    width: 0px;\n    height: 0px;\n    right: -14px;\n    top: 7px;\n    border-width: 8px;\n    border-style: solid;\n    border-color: transparent transparent transparent rgb(98, 185, 0);\n    border-image: initial;\n}\n.item-left .message::before {\n\tcontent: \"\";\n    position: absolute;\n    width: 0px;\n    height: 0px;\n    left: -13px;\n    top: 6px;\n    border-width: 8px;\n    border-style: solid;\n    border-color: transparent rgb(255, 255, 255) transparent transparent;\n    border-image: initial;\n}\n\n\nh1, h2 {\n  font-weight: normal;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ChatRoom.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hello\"},[(!_vm.isCheckin)?_c('div',{staticClass:\"login-wrap\"},[_c('div',{staticClass:\"login-con\"},[_c('h3',[_vm._v(\"用户登录\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.uname),expression:\"uname\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入昵称\",\"id\":\"loginName\"},domProps:{\"value\":(_vm.uname)},on:{\"keyup\":function($event){if(!('button' in $event)&&$event.keyCode!==13){ return null; }return _vm.login($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.uname=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_vm._v(\" \"),_c('button',{staticClass:\"login-btn\",on:{\"click\":_vm.login}},[_vm._v(\"登录\")])])]):_c('div',{staticClass:\"chat-wrap \"},[_c('h1',[_vm._v(\"多人聊天室（总人数：\"+_vm._s(_vm.amount)+\"）\")]),_vm._v(\" \"),_c('div',{staticClass:\"chat-con clearfix\",attrs:{\"id\":\"chat_con\"}},[_vm._l((_vm.msgList),function(item){return [(item.msgType==0)?[_c('p',[_vm._v(_vm._s(item.message))]),_c('br')]:[(_vm.uname == item.username )?_c('div',{staticClass:\"chat-item item-right clearfix\"},[_c('span',{staticClass:\"img fr\"}),_c('span',{staticClass:\"message fr\"},[_vm._v(_vm._s(item.message))])]):_c('div',{staticClass:\"chat-item item-left clearfix rela\"},[_c('span',{staticClass:\"abs uname\"},[_vm._v(_vm._s(item.username)+\"  ( \"+_vm._s(_vm._f(\"formatDate\")(item.msgDate))+\" )\")]),_c('span',{staticClass:\"img fl\"}),_c('span',{staticClass:\"fl message\"},[_vm._v(_vm._s(item.message))])])]]})],2),_vm._v(\" \"),_c('div',{staticClass:\"bottom\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.inputMsg),expression:\"inputMsg\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"id\":\"sendtxt\"},domProps:{\"value\":(_vm.inputMsg)},on:{\"keyup\":function($event){if(!('button' in $event)&&$event.keyCode!==13){ return null; }return _vm.sendMessage($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.inputMsg=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_vm._v(\" \"),_c('button',{staticClass:\"sendBtn\",on:{\"click\":_vm.sendMessage}},[_vm._v(\"发送\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6d874426\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ChatRoom.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6d874426\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatRoom.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatRoom.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatRoom.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6d874426\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatRoom.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6d874426\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ChatRoom.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}